const contentData = {
    history: `
        <h3>History</h3>
        <p>The temple is also believed as the center of the earth or eastern hemisphere. There is a belief that after taking birth for killing Asur Bhandasur, Devi sat here taking â€œKanya Swarup.â€ The idol is â€œSwayambhu,â€ which signifies it has appeared and not created. She is believed to have three Swarups in the temple. These include Sthula, Sukshama, and Shunya.</p>
        <p>The present temple was built during the 13th century. The principal idol is Devi Durga, who is worshipped as Viraja (Girija), and the temple gave Jajpur the nicknames "Viraja Kshetra" and "Biraja Peetha".</p>
        <P>The Durga idol has two hands (dwibhuja), spearing the chest of Mahishasura with one hand and pulling his tail with the other. One of her feet is on a lion, and the other is on Mahishasura's chest. </P>
        <p>Mahishasura is depicted as a water buffalo. The idol's crown features Ganesha, a crescent moon and a lingam. The temple covers a large area, and has several shrines to Shiva and other deities. According to the Skanda Purana it cleanses pilgrims, and it is called the Viraja or the Biraja kshetra.</p>
        <p>The Brahmayamala Tantra has a hymn, "Aadya Stotra", dedicated to Shakti. In the hymn, Vimala is the goddess of Puri and Viraja (Girija) is the goddess worshipped in the Utkala Kingdom, which became Odisha.</p>
        <p>According to the Tantra Chudamani, Sati's navel fell in the Utkala Kingdom, also known as "Viraja kshetra". Adi Shankara, in his Ashtadasha Shakti Peetha Stuti describes the goddess as Girija. In Tantra literature, the Oddiyana Peetha (Devnagari: à¤“à¤¡à¥à¤¯à¤¾à¤¨ à¤ªà¥€à¤ ) is located in eastern India near the Vaitarani River (an Oddiyana is an ornament worn by a woman around her navel).</p>       
        <div align="center">
          <p><b>Appellation:</b> Oddyana Pitham.</p>
          <p><b>Part of body fallen :</b> Navel.</p>
          <p><b>Name of shakti:</b>Girija Devi.</p>
        </div>
        <div style="margin-top: 20px; text-align: center;">
      <button id="listenBtn">ğŸ”Š Listen</button>
      <button id="resetBtn">ğŸ” Reset</button>
    </div>
    `,
    significance: `
        <h3>Significance</h3>
        <p>ÂŸ This temple has a rich historical and mythological significance. History: </p>
        <p>ÂŸ The history of the Maa Biraja Temple dates back over 1,000 years.</p>
        <p>ÂŸ Temple stands as a testament to the rich cultural and religious heritage of the region. This ancient temple is dedicated to Goddess Biraja, a form of Goddess Durga, and has a history that dates back centuries.</p>
        <p>ÂŸ Name of shakti : Maa Biraja(Girija Devi).</p>
        <p>ÂŸ	The Biraja Temple, or Birija Kshetra (BirajÄ Ksetra), is a historic Hindu temple located in Jajpur,Odisha, India. </p>
        <p>ÂŸ The temple covers a large area, and has several shrines to Shiva and other deities. </p>
        <p>ÂŸ According to the Skanda Purana it cleanses pilgrims, and it is called the Viraja or the Biraja kshetra.</p>  
        <div style="margin-top: 20px; text-align: center;">
      <button id="listenBtn">ğŸ”Š Listen</button>
      <button id="resetBtn">ğŸ” Reset</button>
    </div>  
        `,
    festivals: `
        <h3>Festivals</h3>
        <p>ÂŸ The primary ritual in the temple is Sharadiya Durga Puja, which begins on the night of Krishna Paksha Ashtami. This falls before Mahalaya, and ends on Ashwin Shukla Paksha Navami. </p>
        <p> ÂŸ The puja, known as Shodasha Dinatatmika Puja, lasts for 16 days. The ratha (chariot festival) is known as Simhadhwaja, and its flag bears a lion.</p> 
        <p> ÂŸ During the lunar transition from Shukla Ashtami to Shukla Navami an animal sacrifice, Bali Daanam, is performed. Navratri is celebrated as Aparajita Puja.</p>
        <p>ÂŸ Other festivals include Nakshatra, Shravana, Prathamastami, Pana Sankranti, Raja Parva and Navanna. Devi is worshiped daily in accordance with Tantra and Agama traditions as Mahishasuramardini by the Brahmins of Jajpur.</p>
        <div style="margin-top: 20px; text-align: center;">
      <button id="listenBtn">ğŸ”Š Listen</button>
      <button id="resetBtn">ğŸ” Reset</button>
    </div>
        `,
    howtoreach: `
      <h3>How to Reach</h3>
      <p>ğŸ“ Location: Jajpur,Odisha<br>âœˆï¸ Nearest Airports: Biju Patnaik International Airport (104 KM) <br>ğŸš‰ Railway Station: Cuttack Railway Station (76 KM) <br>ğŸ›£ï¸ Road ways: Bhadrak (36 KM)</p>
      <div style="margin-top: 20px; text-align: center;">
      <button id="listenBtn">ğŸ”Š Listen</button>
      <button id="resetBtn">ğŸ” Reset</button>
    </div>
    `,
    timings: `
      <h3>Visiting Hours</h3>
      <p>ğŸ•˜ Morning: 6:00AM - 1:00 PM<br>ğŸ•“ Evening: 3:00 PM - 10:00 PM</p>
      <div style="margin-top: 20px; text-align: center;">
      <button id="listenBtn">ğŸ”Š Listen</button>
      <button id="resetBtn">ğŸ” Reset</button>
    </div>
    `,
    bookings: `
      <h3>Link for Bookings</h3>
      <p>Click down link to open official website of Girija Devi Temple</p>
      <center> <a href="https://www.maabiraja.com/" target="_blank">
                    <button>https://www.maabiraja.com/</button>
                </a></center>
                <div style="margin-top: 20px; text-align: center;">
      <button id="listenBtn">ğŸ”Š Listen</button>
      <button id="resetBtn">ğŸ” Reset</button>
    </div>
    `,
    foodaccom: `
      <h3>Food and Accomodation</h3>
      <p><b>Prasadam:</b>prasadam typically includes items such as cooked rice, dal (lentils), vegetable curry, bhaja (fried vegetables), kheer (rice pudding), and sometimes special Odia sweets like chhena poda or rasagulla. These prasadams are offered to the goddess Biraja during puja rituals and then distributed to devotees as blessings.</p>
      <p>ÂŸ No facilities available. </p>
      <p>ÂŸ There are several accommodation options near the temple for devotees, such as lodges, hotels, and guest houses..</p>
      <div style="margin-top: 20px; text-align: center;">
      <button id="listenBtn">ğŸ”Š Listen</button>
      <button id="resetBtn">ğŸ” Reset</button>
    </div>        
      `,
    dress: ` 
      <h3>Dressing & Restrictions</h3>
      <p>ÂŸ Do respect ancient customs and co-piligrims while at temple.
      <p>ÂŸ Smoking and drinking is prohibited in this temple.
      <p>ÂŸ Chewing betel leaves, tobacco, gutka and spitting inside temple is strictly prohibited.
      <p>ÂŸ For men the dress code is Shirt & Trouser, Dhoti or Pyjamas with upper cloth. 
      <p>ÂŸ For women the preferred dress code is saree or half-saree with blouse or chudidhar.</p>
      <div style="margin-top: 20px; text-align: center;">
      <button id="listenBtn">ğŸ”Š Listen</button>
      <button id="resetBtn">ğŸ” Reset</button>
    </div>
      `,
    location: ` 
    <h3 style="padding-left:55px;">Location</h3>
    <p style="text-align: center;">ğŸ“Jajpur,Odisha</p>
    <div style="text-align: center; margin-top: 15px;">
    <button onclick="window.open('https://www.google.com/maps/d/u/0/edit?mid=1UNZYrCXntuubsrGfGQOCbDX1ucjw1_M&usp=sharing', '_blank')" style="background-color: #4e3ec8; color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; font-size: 16px;">ğŸ—ºï¸ View Location on Map </button>
  </div>
  <p style="text-align: center;">Press down to get route from your current location</p>
  <div style="text-align: center; margin-top: 15px;">
    <button onclick="window.open('https://www.google.com/maps/dir//20.8337649,86.3380219/@20.8337452,86.2556202,12z?entry=ttu&g_ep=EgoyMDI1MDYyMi4wIKXMDSoASAFQAw%3D%3D', '_blank')" style="background-color: #4e3ec8; color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; font-size: 16px;">
      ğŸ›£ï¸ Route
    </button>
  </div>
    `,
    vr:`
    <iframe src="https://www.google.com/maps/embed?pb=!4v1750252179155!6m8!1m7!1sCAoSFkNJSE0wb2dLRUlDQWdJQ2M3ZWp1SHc.!2m2!1d20.83367337999594!2d86.33813790380587!3f117.01159632918784!4f18.811938930451646!5f0.7820865974627469" width="800px" height="500px" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
    `,
    youtube:`
    <iframe width="800" height="500" src="https://www.youtube-nocookie.com/embed/4cfm-lBDmI4?si=WkMgyniVe61ZbqNE&amp;controls=0" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
    `
  };

  function showPopup(key) {
    document.getElementById('popupText').innerHTML = contentData[key];
    document.getElementById('popup').style.display = 'flex';
     textToRead = Array.from(document.querySelectorAll('#popupText p, #popupText h3'))
                    .map(el => el.innerText)
                    .join(' ');
    const listenBtn = document.getElementById("listenBtn");
  const resetBtn = document.getElementById("resetBtn");

  if (listenBtn) {
    listenBtn.addEventListener("click", () => {
      if (!isSpeaking) {
        utterance = new SpeechSynthesisUtterance(textToRead);
        synth.speak(utterance);
        isSpeaking = true;
        isPaused = false;
        listenBtn.textContent = "â¸ï¸ Pause";

        utterance.onend = () => {
          isSpeaking = false;
          isPaused = false;
          listenBtn.textContent = "ğŸ”Š Listen";
        };
      } else if (!isPaused) {
        synth.pause();
        isPaused = true;
        listenBtn.textContent = "â–¶ï¸ Resume";
      } else {
        synth.resume();
        isPaused = false;
        listenBtn.textContent = "â¸ï¸ Pause";
      }
    });
  }

  if (resetBtn) {
    resetBtn.addEventListener("click", () => {
      synth.cancel();
      isSpeaking = false;
      isPaused = false;
      if (listenBtn) listenBtn.textContent = "ğŸ”Š Listen";
    });
  }
  }

  function closePopup() {
    document.getElementById('popup').style.display = 'none';
    window.speechSynthesis.cancel();
  isSpeaking = false;
  isPaused = false;
  document.getElementById("listenBtn").textContent = "ğŸ”Š Listen";
  }
const sliderImages = [
  {
    src: "https://images.tv9hindi.com/wp-content/uploads/2021/10/Girija-mata-mandir.jpg",
    caption: "Girija Mata Mandir - Traditional Front View"
  },
  {
    src: "https://pbs.twimg.com/media/E1rNpwdVEAMwXYi.jpg",
    caption: "Evening Illumination at Girija Devi Temple"
  },
  {
    src: "https://dynamic-media-cdn.tripadvisor.com/media/photo-o/06/7e/7f/e5/maa-biraja-temple.jpg?w=1200&h=1200&s=1",
    caption: "Main Temple Structure - Maa Biraja Temple"
  },
  {
    src: "https://www.templepurohit.com/wp-content/uploads/2015/10/39.jpg",
    caption: "Temple Courtyard at Biraja Devi Temple"
  },
  {
    src: "https://miro.medium.com/v2/resize:fit:600/1*3pCX9fs2YTsLmxZGaJaXyw.jpeg",
    caption: "Close-up of Girija Mata Idol at Jajpur Temple"
  },
  {
    src: "https://jajpurbusiness.com/wp-content/uploads/2021/03/maxresdefault.jpg",
    caption: "Devotees Performing Rituals at Maa Biraja Mandir"
  },
  {
    src: "https://www.odishalifestyle.com/wp-content/uploads/2023/07/CFFF54_1684143772350_0-1.jpeg",
    caption: "Shakti Peetha Biraja Temple in Odisha - Devotee Gathering"
  },
  {
    src: "https://imvoyager.com/wp-content/uploads/2023/03/Nabhi-Gaya-at-Biraja-Mandir-Jajpur.jpg",
    caption: "Nabhi Gaya at Biraja Mandir - Jajpur"
  }
];
const sliderTrackHalf = document.getElementById("sliderTrackHalf");
let halfIndex = 1;
let autoSlideInterval;
const slideWidth = 70 + 2; // 70% + 2% gap

function buildHalfSlider() {
  sliderTrackHalf.innerHTML = '';

  // Clone last slide first for seamless loop
  const lastClone = createSlide(sliderImages[sliderImages.length - 1]);
  sliderTrackHalf.appendChild(lastClone);

  sliderImages.forEach((imgObj, i) => {
    const slide = createSlide(imgObj);
    if (i === 0) slide.classList.add("active");
    sliderTrackHalf.appendChild(slide);
  });

  // Clone first slide last
  const firstClone = createSlide(sliderImages[0]);
  sliderTrackHalf.appendChild(firstClone);

  setSlidePosition(halfIndex);
}

function createSlide(imgObj) {
  const slideDiv = document.createElement("div");
  slideDiv.className = "slide-half";

  const img = document.createElement("img");
  img.src = imgObj.src;
  img.alt = imgObj.caption;

  const caption = document.createElement("div");
  caption.className = "slider-caption-half";
  caption.textContent = imgObj.caption;

  slideDiv.appendChild(img);
  slideDiv.appendChild(caption);
  return slideDiv;
}
function setSlidePosition(index) {
  const slides = document.querySelectorAll('.slide-half');
  const wrapper = document.querySelector('.slider-wrapper-half');
  const track = document.querySelector('.slider-track-half');

  if (!slides[index]) return;

  const slide = slides[index];
  const slideWidth = slide.offsetWidth + 20; // 20px = gap
  const centerOffset = (slide.offsetLeft + slideWidth / 2) - (wrapper.offsetWidth / 2);

  track.style.transform = `translateX(-${centerOffset}px)`;

  // Reset all slide classes
  slides.forEach((s, i) => {
    s.classList.remove('active', 'prev');
    if (i === index) s.classList.add('active');
    if (i === index - 1) s.classList.add('prev');
  });
}


function scrollHalfSlider() {
  const slides = document.querySelectorAll('.slide-half');
  if (halfIndex >= sliderImages.length + 1) return; // prevent rapid clicks
  halfIndex++;

  setSlidePosition(halfIndex);

  sliderTrackHalf.addEventListener('transitionend', handleLoop, { once: true });
}

function handleLoop() {
  const slides = document.querySelectorAll('.slide-half');
  if (halfIndex === sliderImages.length + 1) {
    // Moved past last (cloned first) â†’ jump to real first
    sliderTrackHalf.style.transition = "none";
    halfIndex = 1;
    setSlidePosition(halfIndex);
    setTimeout(() => {
      sliderTrackHalf.style.transition = "transform 0.6s ease-in-out";
    }, 10);
  }

  if (halfIndex === 0) {
    // Moved past first (cloned last) â†’ jump to real last
    sliderTrackHalf.style.transition = "none";
    halfIndex = sliderImages.length;
    setSlidePosition(halfIndex);
    setTimeout(() => {
      sliderTrackHalf.style.transition = "transform 0.6s ease-in-out";
    }, 20);
  }
}

function startAutoSlide() {
  autoSlideInterval = setInterval(scrollHalfSlider, 2500);
}

function stopAutoSlide() {
  clearInterval(autoSlideInterval);
}

window.addEventListener("DOMContentLoaded", () => {
  buildHalfSlider();
  startAutoSlide();
});
function manualSlide(direction) {
  const slides = document.querySelectorAll('.slide-half');

  if (direction === 1) {
    // Next
    if (halfIndex >= slides.length - 1) return;
    halfIndex++;
  } else {
    // Previous
    if (halfIndex <= 0) return;
    halfIndex--;
  }

  setSlidePosition(halfIndex);
  stopAutoSlide();   // Optional: stop auto-slide when manually clicked
  startAutoSlide();  // Optional: restart after click
}

const apiKey = 'a20b221e9ef5baed6d9d0d37f7db90df'; // Replace with your real API key

// Kamakhya Temple (Guwahati)
const lat = 24.7969;
const lon = 85.0002;

const weatherIcon = document.getElementById("weatherIcon");
const modal = document.getElementById("weatherModal");
const closeBtn = document.querySelector(".close");

weatherIcon.addEventListener("click", () => {
  modal.style.display = "block";
  fetchWeather();
});

closeBtn.onclick = () => {
  modal.style.display = "none";
};

window.onclick = (e) => {
  if (e.target === modal) modal.style.display = "none";
};

function fetchWeather() {
  const url = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&units=metric&appid=${apiKey}`;

  fetch(url)
    .then(res => res.json())
    .then(data => {
      document.getElementById("temp").textContent = data.main.temp;
      document.getElementById("condition").textContent = data.weather[0].description;
      document.getElementById("conditionIcon").src = `https://openweathermap.org/img/wn/${data.weather[0].icon}.png`;
    })
    .catch(() => {
      alert("Error fetching weather. Please check your API key.");
    });
}
let synth = window.speechSynthesis;
let utterance;
let isSpeaking = false;
let isPaused = false;
let textToRead = "";

const GEMINI_API_KEY = "AIzaSyAuv5e9GRI6VHzd1bUETHiRh18g4-bVyyk"; 
  function toggleChatbot() {
    const chatbot = document.getElementById('chatbotWindow');
    chatbot.style.display = chatbot.style.display === 'flex' ? 'none' : 'flex';
  }

  function appendMessage(sender, message) {
    const chat = document.getElementById('chatMessages');
    const msg = document.createElement('div');
    msg.className = 'message ' + (sender === 'user' ? 'user-message' : 'bot-message');
    msg.textContent = message;
    chat.appendChild(msg);
    chat.scrollTop = chat.scrollHeight;
  }

  function replaceLastBotMessage(newText) {
    const chat = document.getElementById('chatMessages');
    const messages = chat.querySelectorAll('.bot-message');
    if (messages.length > 0) {
      messages[messages.length - 1].textContent = newText;
    }
  }

  async function sendMessage() {
    const input = document.getElementById('userInput');
    const userMessage = input.value.trim();
    if (!userMessage) return;

    appendMessage('user', userMessage);
    input.value = '';
    appendMessage('bot', 'Typing...');

    try {
      const res = await fetch(
        `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${GEMINI_API_KEY}`,
        {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            contents: [{ parts: [{ text: userMessage }] }]
          })
        }
      );

      const data = await res.json();
      console.log("Gemini response:", data);
      const botReply = data.candidates?.[0]?.content?.parts?.[0]?.text || "Sorry, no reply.";
      replaceLastBotMessage(botReply);
    } catch (err) {
      console.error("Gemini API error:", err);
      replaceLastBotMessage("Error getting response from Gemini.");
    }
  }
document.addEventListener("DOMContentLoaded", () => {
  const userButton = document.getElementById("userButton");
  const dropdown = document.getElementById("userDropdown");

  userButton.addEventListener("click", (e) => {
    e.stopPropagation(); // Prevent event bubbling
    dropdown.style.display = dropdown.style.display === "block" ? "none" : "block";
  });

  // Hide dropdown when clicking outside
  document.addEventListener("click", (e) => {
    if (!e.target.closest("#userMenu")) {
      dropdown.style.display = "none";
    }
  });
});
document.addEventListener("DOMContentLoaded", () => {
  const logoutBtn = document.getElementById("logoutBtn");

  logoutBtn.addEventListener("click", () => {
    // Optional: Clear session/local storage if used
    // localStorage.clear();

    // Redirect to homepage
    window.location.href = "login.html"; // âœ… Change if your filename is different
  });
});
firebase.auth().signOut().then(() => {
  window.location.href = "login.html";
}).catch((error) => {
  console.error("Logout failed:", error);
});
