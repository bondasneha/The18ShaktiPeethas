const contentData = {
    history: `
        <h3>History</h3>
        <p>The temple is prominent in both Saivite and Shakta Hindu traditions. he presiding deity of the temple of Puruhutika Devi, one of the Maha Shakti Peethas is on the premises of Kukkuteswara Temple.</p>
        <p>Pithapuram is referred to in the Skanda Purana and in Srinatha's Bheemeswara Puranamu and also in Samudragupta's Allahabad stone pillar inscription.</p>
        <p>It has a rich history dating back to the time of the Chalukya dynasty, around the 9th century AD. The temple is renowned for its architectural beauty and spiritual significance, attracting devotees from far and wide.</p>
        <p>Legends and local folklore surrounding the temple add to its cultural importance, making it a cherished pilgrimage site for Hindus.</p>
        <p>The temple was built on the site where Lord Shiva emerged from a Shiva Linga in the form of a cock (kukkuta), hence the name "Kukkuteswara Swamy".</p>
        <p>The temple has undergone several renovations and expansions over the centuries, reflecting the architectural styles and cultural influences of different periods.</p>
        <p>Throughout its history, the Kukkuteswara Swamy Temple has been an important pilgrimage site for devotees of Lord Shiva. It attracts visitors from across India who come to seek the blessings of the deity and to participate in various religious ceremonies and festivals held at the temple.</p>      
        <div align="center">
          <p><b>Appellation:</b> Pushkarini Pitham.</p>
          <p><b>Part of body fallen :</b> Back.</p>
          <p><b>Name of shakti :</b> Puruhutika devi(Puruhuthika Devi).</p>
        </div>
        <div style="margin-top: 20px; text-align: center;">
      <button id="listenBtn">ğŸ”Š Listen</button>
      <button id="resetBtn">ğŸ” Reset</button>
    </div>
    `,
    significance: `
        <h3>Significance</h3>
        <p>ÂŸ It is one of the eighteen Maha Sakthi Peethas considered the most significant pilgrimage destinations in Shaktism.</p>
        <p>ÂŸ Temple holds significant religious and cultural importance for devotees, particularly followers of Lord Shiva.</p>
        <p>ÂŸ Serving as a symbol of faith, tradition, and spirituality.</p>
        <p>ÂŸ Kukkuteswara Temple is a Hindu temple in Pitapuram town of Kakinada district, Andhra Pradesh, India.
        <p>ÂŸ The temple is dedicated to lord shiva. </p>
        <p>ÂŸ Lord Shiva seld manifested here in the form of Cock's Head which is later covered with the present Linga form.</p>
        <p>ÂŸ The temple is also famous for its single-stone Nandi and a self-originated Shiva Linga.</p>
        <div style="margin-top: 20px; text-align: center;">
      <button id="listenBtn">ğŸ”Š Listen</button>
      <button id="resetBtn">ğŸ” Reset</button>
    </div>
        `,
    festivals: `
        <h3>Festivals</h3>
        <p>ÂŸ Navaratri.</p>
        <p>ÂŸ Maha Shivaratri.</p>
        <p>ÂŸ Karthika Masam.</p>
        <p>ÂŸ Devi Navarathriâ€™s during Dussehra are the main festivals celebrated at this temple.</p>
        <p>ÂŸ The temple also celebrates Maghabahula Ekadasi for Kukkuteswara, Suddha Ekadasi for Kunti Madhava worship, Kumaraswamy during Palguna Masa.</p>
        <div style="margin-top: 20px; text-align: center;">
      <button id="listenBtn">ğŸ”Š Listen</button>
      <button id="resetBtn">ğŸ” Reset</button>
    </div>
        `,
    howtoreach: `
      <h3>How to Reach</h3>
      <p>ğŸ“ Location: Pithapuram,Andhra Pradesh<br>âœˆï¸ Nearest Airports: Rajahmundry Airport (57 KM) <br>ğŸš‰ Railway Station: Kakinada Town Railway Station North Terminal (16 KM) <br>ğŸ›£ï¸ Road ways: Samarlakota - 12 KM</p>
      <div style="margin-top: 20px; text-align: center;">
      <button id="listenBtn">ğŸ”Š Listen</button>
      <button id="resetBtn">ğŸ” Reset</button>
    </div>
    `,
    timings: `
      <h3>Visiting Hours</h3>
      <p>ğŸ•˜ Morning: 5:00 AM - 12:30 PM<br>ğŸ•“ Evening: 4:30 AM - 8:30 PM</p>
      <div style="margin-top: 20px; text-align: center;">
      <button id="listenBtn">ğŸ”Š Listen</button>
      <button id="resetBtn">ğŸ” Reset</button>
    </div>
    `,
    foodaccom: `
      <h3>Food and Accomodation</h3>
      <p><b>Prasadam:</b>Prasadam typically includes items such as cooked rice, tamarind rice, sweet pongal, various types of sweets like laddu and jaggery-based sweets, and sometimes savory snacks like murukku or chivda. These prasadams are offered to the deity Kukkuteswara Swamy during puja rituals and then distributed to devotees as blessings.</p>
      <p>ÂŸ Located 1.2 km from the Pithapuram bus stand, Kukkuteswara Devasthanam offers three and four-bedded AC rooms as well as AC dormitory accommodation. Meals are available here.</p>
      <div style="margin-top: 20px; text-align: center;">
      <button id="listenBtn">ğŸ”Š Listen</button>
      <button id="resetBtn">ğŸ” Reset</button>
    </div>
      `,
    dress: ` 
      <h3>Dressing & Restrictions</h3>
      <p>ÂŸ Smoking and drinking is prohibited in this temple. </p>
      <p>ÂŸ Chewing betel leaves, tobacco, gutka and spitting inside temple is strictly prohibited.</p>
      <p>ÂŸ Shorts, mini-skirts, middies, sleeveless tops, low-waist jeans and short-length T-shirts are not allowed.</p>
      <div style="margin-top: 20px; text-align: center;">
      <button id="listenBtn">ğŸ”Š Listen</button>
      <button id="resetBtn">ğŸ” Reset</button>
    </div>
      `,
    location: ` 
    <h3 style="padding-left:55px;">Location</h3>
    <p style="text-align: center;">ğŸ“Pithapuram,Andhra Pradesh</p>
    <div style="text-align: center; margin-top: 15px;">
    <button onclick="window.open('https://www.google.com/maps/d/u/0/edit?mid=1uGsiKudPDDVyckejZIC-tp6gMjHW7l0&usp=sharing', '_blank')" style="background-color: #4e3ec8; color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; font-size: 16px;">ğŸ—ºï¸ View Location on Map </button>
  </div>
  <p style="text-align: center;">Press down to get route from your current location</p>
  <div style="text-align: center; margin-top: 15px;">
    <button onclick="window.open('https://www.google.com/maps/dir//17.1068451,82.2455346/@17.1068284,82.1631328,12z?entry=ttu&g_ep=EgoyMDI1MDYyMi4wIKXMDSoASAFQAw%3D%3D', '_blank')" style="background-color: #4e3ec8; color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; font-size: 16px;">
      ğŸ›£ï¸ Route
    </button>
  </div>
    `,
    vr:`
    <iframe src="https://www.google.com/maps/embed?pb=!4v1750250075997!6m8!1m7!1sPwWykXLmscbuaRXDV3M3Vg!2m2!1d17.10706466621762!2d82.24554741388448!3f78.95982178473001!4f9.10656129515398!5f0.7820865974627469" width="800px" height="500px" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
    `,
    youtube:`
    <iframe width="800" height="500" src="https://www.youtube-nocookie.com/embed/usVXDnc5Lfc?si=7AvruuQDGiVnn-dN&amp;controls=0&amp;start=6" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
    `
  };

  function showPopup(key) {
    document.getElementById('popupText').innerHTML = contentData[key];
    document.getElementById('popup').style.display = 'flex';
     textToRead = Array.from(document.querySelectorAll('#popupText p, #popupText h3'))
                    .map(el => el.innerText)
                    .join(' ');
      const listenBtn = document.getElementById("listenBtn");
  const resetBtn = document.getElementById("resetBtn");

  if (listenBtn) {
    listenBtn.addEventListener("click", () => {
      if (!isSpeaking) {
        utterance = new SpeechSynthesisUtterance(textToRead);
        synth.speak(utterance);
        isSpeaking = true;
        isPaused = false;
        listenBtn.textContent = "â¸ï¸ Pause";

        utterance.onend = () => {
          isSpeaking = false;
          isPaused = false;
          listenBtn.textContent = "ğŸ”Š Listen";
        };
      } else if (!isPaused) {
        synth.pause();
        isPaused = true;
        listenBtn.textContent = "â–¶ï¸ Resume";
      } else {
        synth.resume();
        isPaused = false;
        listenBtn.textContent = "â¸ï¸ Pause";
      }
    });
  }

  if (resetBtn) {
    resetBtn.addEventListener("click", () => {
      synth.cancel();
      isSpeaking = false;
      isPaused = false;
      if (listenBtn) listenBtn.textContent = "ğŸ”Š Listen";
    });
  }
  }

  function closePopup() {
    document.getElementById('popup').style.display = 'none';
    window.speechSynthesis.cancel();
  isSpeaking = false;
  isPaused = false;
  document.getElementById("listenBtn").textContent = "ğŸ”Š Listen";
  }
const sliderImages = [
  {
    src: "https://dynamic-media-cdn.tripadvisor.com/media/photo-o/07/59/84/23/sri-kukkuteswara-swamy.jpg?w=1200&h=1200&s=1",
    caption: "Sri Kukkuteswara Swamy Temple View"
  },
  {
    src: "https://famoustemplesofindia.com/wp-content/uploads/2023/10/puruhutika-devi-temple-pithapuram-1.jpg",
    caption: "Temple Pillars and Devotee Area"
  },
  {
    src: "https://3.bp.blogspot.com/-Ht42k94yIjw/UUVU3nERjVI/AAAAAAAAA9s/NFD-K04rUsk/w1200-h630-p-k-no-nu/DSC02029.JPG",
    caption: "Ancient Stone Mandapa Inside Puruhutika Temple"
  },
  {
    src: "https://famoustemplesofindia.com/wp-content/uploads/2023/10/puruhutika-devi-temple-pithapuram-2.jpg",
    caption: "Compact Side View of Puruhutika Temple Premises"
  },
  {
    src: "https://www.guidedtirth.com/wp-content/uploads/2023/01/b-KukkuteswaraTempleInside-Pithapuram-420x360.jpg",
    caption: "Entrance and Gopuram - Puruhutika Shakti Peetha"
  },
  {
    src: "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgNpv2_KER4G8mdh2ccjgjLqNrpulnCBbOZkAhf60Y80tcNZkLVxEdvMLnIjlaBwfbK09kcdMIwsduFSl_N98SOks-ij-ARs6SEuqwiBYsqWXCZkGw8GQQz3zqG1SsCwd0OB7fy5R6Ctbz_fqk3Gct72dr4jvAVMM0rG89bgovjO3x2ylx6FLs6dxhjrbU/w1200-h630-p-k-no-nu/pithapuram%20puruhuthika%20temple.jpg",
    caption: "Puruhutika Devi Temple - One of the Ashtadasha Shakti Peethas"
  },
  {
    src: "https://sannidhi.net/wp-content/uploads/2024/02/kukkateshwara2.png",
    caption: "Entrance and Gopuram - Puruhutika Shakti Peetha"
  },
  {
    src: "https://famoustemplesofindia.com/wp-content/uploads/2023/10/puruhutika-devi-temple-pithapuram-4-768x1024.jpg",
    caption: "Scenic View of Pithapuram Temple Complex"
  }
];
const sliderTrackHalf = document.getElementById("sliderTrackHalf");
let halfIndex = 1;
let autoSlideInterval;
const slideWidth = 70 + 2; // 70% + 2% gap

function buildHalfSlider() {
  sliderTrackHalf.innerHTML = '';

  // Clone last slide first for seamless loop
  const lastClone = createSlide(sliderImages[sliderImages.length - 1]);
  sliderTrackHalf.appendChild(lastClone);

  sliderImages.forEach((imgObj, i) => {
    const slide = createSlide(imgObj);
    if (i === 0) slide.classList.add("active");
    sliderTrackHalf.appendChild(slide);
  });

  // Clone first slide last
  const firstClone = createSlide(sliderImages[0]);
  sliderTrackHalf.appendChild(firstClone);

  setSlidePosition(halfIndex);
}

function createSlide(imgObj) {
  const slideDiv = document.createElement("div");
  slideDiv.className = "slide-half";

  const img = document.createElement("img");
  img.src = imgObj.src;
  img.alt = imgObj.caption;

  const caption = document.createElement("div");
  caption.className = "slider-caption-half";
  caption.textContent = imgObj.caption;

  slideDiv.appendChild(img);
  slideDiv.appendChild(caption);
  return slideDiv;
}
function setSlidePosition(index) {
  const slides = document.querySelectorAll('.slide-half');
  const wrapper = document.querySelector('.slider-wrapper-half');
  const track = document.querySelector('.slider-track-half');

  if (!slides[index]) return;

  const slide = slides[index];
  const slideWidth = slide.offsetWidth + 20; // 20px = gap
  const centerOffset = (slide.offsetLeft + slideWidth / 2) - (wrapper.offsetWidth / 2);

  track.style.transform = `translateX(-${centerOffset}px)`;

  // Reset all slide classes
  slides.forEach((s, i) => {
    s.classList.remove('active', 'prev');
    if (i === index) s.classList.add('active');
    if (i === index - 1) s.classList.add('prev');
  });
}


function scrollHalfSlider() {
  const slides = document.querySelectorAll('.slide-half');
  if (halfIndex >= sliderImages.length + 1) return; // prevent rapid clicks
  halfIndex++;

  setSlidePosition(halfIndex);

  sliderTrackHalf.addEventListener('transitionend', handleLoop, { once: true });
}

function handleLoop() {
  const slides = document.querySelectorAll('.slide-half');
  if (halfIndex === sliderImages.length + 1) {
    // Moved past last (cloned first) â†’ jump to real first
    sliderTrackHalf.style.transition = "none";
    halfIndex = 1;
    setSlidePosition(halfIndex);
    setTimeout(() => {
      sliderTrackHalf.style.transition = "transform 0.6s ease-in-out";
    }, 10);
  }

  if (halfIndex === 0) {
    // Moved past first (cloned last) â†’ jump to real last
    sliderTrackHalf.style.transition = "none";
    halfIndex = sliderImages.length;
    setSlidePosition(halfIndex);
    setTimeout(() => {
      sliderTrackHalf.style.transition = "transform 0.6s ease-in-out";
    }, 20);
  }
}

function startAutoSlide() {
  autoSlideInterval = setInterval(scrollHalfSlider, 2500);
}

function stopAutoSlide() {
  clearInterval(autoSlideInterval);
}

window.addEventListener("DOMContentLoaded", () => {
  buildHalfSlider();
  startAutoSlide();
});
function manualSlide(direction) {
  const slides = document.querySelectorAll('.slide-half');

  if (direction === 1) {
    // Next
    if (halfIndex >= slides.length - 1) return;
    halfIndex++;
  } else {
    // Previous
    if (halfIndex <= 0) return;
    halfIndex--;
  }

  setSlidePosition(halfIndex);
  stopAutoSlide();   // Optional: stop auto-slide when manually clicked
  startAutoSlide();  // Optional: restart after click
}


const apiKey = 'a20b221e9ef5baed6d9d0d37f7db90df';
const lat = 17.1169;
const lon = 82.2528;

const weatherIcon = document.getElementById("weatherIcon");
const modal = document.getElementById("weatherModal");
const closeBtn = document.querySelector(".close");

weatherIcon.addEventListener("click", () => {
  modal.style.display = "block";
  fetchWeather();
});

closeBtn.onclick = () => {
  modal.style.display = "none";
};

window.onclick = (e) => {
  if (e.target === modal) modal.style.display = "none";
};

function fetchWeather() {
  const url = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&units=metric&appid=${apiKey}`;

  fetch(url)
    .then(res => res.json())
    .then(data => {
      document.getElementById("temp").textContent = data.main.temp;
      document.getElementById("condition").textContent = data.weather[0].description;
      document.getElementById("conditionIcon").src = `https://openweathermap.org/img/wn/${data.weather[0].icon}.png`;
    })
    .catch(() => {
      alert("Error fetching weather. Please check your API key.");
    });
}
let synth = window.speechSynthesis;
let utterance;
let isSpeaking = false;
let isPaused = false;
let textToRead = "";

const GEMINI_API_KEY = "AIzaSyAuv5e9GRI6VHzd1bUETHiRh18g4-bVyyk"; 
  function toggleChatbot() {
    const chatbot = document.getElementById('chatbotWindow');
    chatbot.style.display = chatbot.style.display === 'flex' ? 'none' : 'flex';
  }

  function appendMessage(sender, message) {
    const chat = document.getElementById('chatMessages');
    const msg = document.createElement('div');
    msg.className = 'message ' + (sender === 'user' ? 'user-message' : 'bot-message');
    msg.textContent = message;
    chat.appendChild(msg);
    chat.scrollTop = chat.scrollHeight;
  }

  function replaceLastBotMessage(newText) {
    const chat = document.getElementById('chatMessages');
    const messages = chat.querySelectorAll('.bot-message');
    if (messages.length > 0) {
      messages[messages.length - 1].textContent = newText;
    }
  }

  async function sendMessage() {
    const input = document.getElementById('userInput');
    const userMessage = input.value.trim();
    if (!userMessage) return;

    appendMessage('user', userMessage);
    input.value = '';
    appendMessage('bot', 'Typing...');

    try {
      const res = await fetch(
        `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${GEMINI_API_KEY}`,
        {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            contents: [{ parts: [{ text: userMessage }] }]
          })
        }
      );

      const data = await res.json();
      console.log("Gemini response:", data);
      const botReply = data.candidates?.[0]?.content?.parts?.[0]?.text || "Sorry, no reply.";
      replaceLastBotMessage(botReply);
    } catch (err) {
      console.error("Gemini API error:", err);
      replaceLastBotMessage("Error getting response from Gemini.");
    }
  }
document.addEventListener("DOMContentLoaded", () => {
  const userButton = document.getElementById("userButton");
  const dropdown = document.getElementById("userDropdown");

  userButton.addEventListener("click", (e) => {
    e.stopPropagation(); // Prevent event bubbling
    dropdown.style.display = dropdown.style.display === "block" ? "none" : "block";
  });

  // Hide dropdown when clicking outside
  document.addEventListener("click", (e) => {
    if (!e.target.closest("#userMenu")) {
      dropdown.style.display = "none";
    }
  });
});
document.addEventListener("DOMContentLoaded", () => {
  const logoutBtn = document.getElementById("logoutBtn");

  logoutBtn.addEventListener("click", () => {
    // Optional: Clear session/local storage if used
    // localStorage.clear();

    // Redirect to homepage
    window.location.href = "login.html"; // âœ… Change if your filename is different
  });
});
firebase.auth().signOut().then(() => {
  window.location.href = "login.html";
}).catch((error) => {
  console.error("Logout failed:", error);
});
